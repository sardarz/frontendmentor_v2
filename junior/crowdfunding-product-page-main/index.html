<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />

    <title>Frontend Mentor | Crowdfunding product page</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Commissioner:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="reset.css" />
    <link rel="stylesheet" href="main.css" />
  </head>
  <body class="body">
    <header class="header">
      <div class="container">
        <div class="header-content">
          <a href="#"
            ><img src="./images/logo.svg" alt="" class="header-logo"
          /></a>
          <ul class="header-links">
            <li class="header-link"><a href="#">About</a></li>
            <li class="header-link"><a href="#">Discover</a></li>
            <li class="header-link"><a href="#">Get started</a></li>
          </ul>
          <div class="menu-wrapper">
            <img src="./images/icon-close-menu.svg" alt="" class="close" />
            <img src="./images/icon-hamburger.svg" alt="" class="hamburg" />
          </div>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="main-content">
        <div class="main-container">
          <div class="mastercraft">
            <h1>Mastercraft Bamboo Monitor Riser</h1>
            <p>
              A beautiful & handcrafted monitor stand to reduce neck and eye
              strain.
            </p>
            <div class="mastercraft-btns">
              <button class="btn btn-backing" type="button">
                Back this project
              </button>
              <button class="btn btn-bookmark" type="button">
                <p>Bookmark</p>
                <svg width="56" height="56" xmlns="http://www.w3.org/2000/svg">
                  <g fill="none" fill-rule="evenodd">
                    <circle fill="#2F2F2F" cx="28" cy="28" r="28" />
                    <path fill="#B1B1B1" d="M23 19v18l5-5.058L33 37V19z" />
                  </g>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="main-container">
          <div class="stats">
            <div class="stats-wrapper">
              <div class="sta stat-backed">
                <p class="stat-title">$39,914</p>
                <p class="stat-text">of $100,000 backed</p>
              </div>
              <div class="stat stat-backers">
                <p class="stat-title">5,007</p>
                <p class="stat-text">total backers</p>
              </div>
              <div class="stat stat-days">
                <p class="stat-title">56</p>
                <p class="stat-text">days left</p>
              </div>
            </div>
            <div class="stats-progress-bar"><div class="progress"></div></div>
          </div>
        </div>

        <div class="main-container">
          <div class="about">
            <h2 class="about-title">About this project</h2>
            <p class="about-text">
              The Mastercraft Bamboo Monitor Riser is a sturdy and stylish
              platform that elevates your screen to a more comfortable viewing
              height. Placing your monitor at eye level has the potential to
              improve your posture and make you more comfortable while at work,
              helping you stay focused on the task at hand.
              <br />
              <br />
              Featuring artisan craftsmanship, the simplicity of design creates
              extra desk space below your computer to allow notepads, pens, and
              USB sticks to be stored under the stand.
            </p>

            <div class="stands-wrapper">
              <div class="stand">
                <div class="stand-desc">
                  <p class="stand-title">Bamboo Stand</p>
                  <p class="stand-pledge">Pledge $25 or more</p>
                </div>
                <p class="stand-text">
                  You get an ergonomic stand made of natural bamboo. You've
                  helped us launch our promotional campaign, and you’ll be added
                  to a special Backer member list.
                </p>
                <div class="stand-footer">
                  <div class="stand-footer-text-wrapper">
                    <p class="stand-left">101</p>
                    <span>left</span>
                  </div>
                  <button class="stand-reward">Select reward</button>
                </div>
              </div>
              <div class="stand">
                <div class="stand-desc">
                  <p class="stand-title">Black Edition Stand</p>
                  <p class="stand-pledge">Pledge $75 or more</p>
                </div>
                <p class="stand-text">
                  You get a Black Special Edition computer stand and a personal
                  thank you. You’ll be added to our Backer member list. Shipping
                  is included.
                </p>
                <div class="stand-footer">
                  <p class="stand-left">64 <span>left</span></p>
                  <button class="stand-reward">Select Reward</button>
                </div>
              </div>
              <div class="stand out-of-stock">
                <div class="stand-desc">
                  <p class="stand-title">Mahogany Special Edition</p>
                  <p class="stand-pledge">Pledge $200 or more</p>
                </div>
                <p class="stand-text">
                  You get two Special Edition Mahogany stands, a Backer T-Shirt,
                  and a personal thank you. You’ll be added to our Backer member
                  list. Shipping is included.
                </p>
                <div class="stand-footer">
                  <p class="stand-left">0 <span>left</span></p>
                  <button class="stand-reward">Out of stock</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <section class="modal">
      <div class="modal-container">
        <div class="close-modal">
          <svg width="15" height="15" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M11.314 0l2.828 2.828L9.9 7.071l4.243 4.243-2.828 2.828L7.07 9.9l-4.243 4.243L0 11.314 4.242 7.07 0 2.828 2.828 0l4.243 4.242L11.314 0z"
              fill="#000"
              fill-rule="evenodd"
              opacity=".4"
            />
          </svg>
        </div>
        <div class="modal-content">
          <p class="modal-title">Back this project</p>
          <p class="modal-support-text">
            Want to support us in bringing Mastercraft Bamboo Monitor Riser out
            in the world?
          </p>
          <div class="modal-stands">
            <div class="modal-stand modal-stand-no-reward">
              <div class="modal-visible">
                <div class="modal-circle"></div>
                <div class="modal-wrapper">
                  <div class="modal-stand-title">Pledge with no reward</div>
                  <p class="modal-stand-text">
                    Choose to support us without a reward if you simply believe
                    in our project. As a backer, you will be signed up to
                    receive product updates via email.
                  </p>
                </div>
              </div>
            </div>
            <div class="modal-stand">
              <div class="modal-left">
                <p class="modal-left-amount">101</p>
                <p class="modal-left-text">left</p>
              </div>
              <div class="modal-visible">
                <div class="modal-circle"></div>
                <div class="modal-wrapper">
                  <div class="modal-title-wrapper">
                    <div class="modal-stand-title">Bamboo Stand</div>
                    <p class="modal-pledge">Pledge $25 or more</p>
                  </div>
                  <p class="modal-stand-text">
                    You get an ergonomic stand made of natural bamboo. You've
                    helped us launch our promotional campaign, and you’ll be
                    added to a special Backer member list.
                  </p>
                </div>
              </div>
              <div class="modal-hidden">
                <hr />
                <div class="modal-hidden-content">
                  <p class="modal-hidden-enter">Enter your pledge</p>
                  <div class="modal-btns">
                    <div class="modal-amount-wrapper">
                      <input
                        type="number"
                        value="25"
                        name="modal-amout"
                        id="modal-amount"
                      />
                    </div>
                    <button type="button" class="modal-btn">Continue</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-stand">
              <div class="modal-left">
                <p class="modal-left-amount">64</p>
                <p class="modal-left-text">left</p>
              </div>
              <div class="modal-visible">
                <div class="modal-circle"></div>
                <div class="modal-wrapper">
                  <div class="modal-title-wrapper">
                    <div class="modal-stand-title">Black Edition Stand</div>
                    <p class="modal-pledge">Pledge $75 or more</p>
                  </div>
                  <p class="modal-stand-text">
                    You get a Black Special Edition computer stand and a
                    personal thank you. You’ll be added to our Backer member
                    list. Shipping is included.
                  </p>
                </div>
              </div>
              <div class="modal-hidden">
                <hr />
                <div class="modal-hidden-content">
                  <p class="modal-hidden-enter">Enter your pledge</p>
                  <div class="modal-btns">
                    <div class="modal-amount-wrapper">
                      <input
                        type="number"
                        value="75"
                        name="modal-amout"
                        id="modal-amount"
                      />
                    </div>
                    <button type="button" class="modal-btn">Continue</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-stand modal-stand-disabled">
              <div class="modal-left">
                <p class="modal-left-amount">0</p>
                <p class="modal-left-text">left</p>
              </div>
              <div class="modal-visible">
                <div class="modal-circle"></div>
                <div class="modal-wrapper">
                  <div class="modal-title-wrapper">
                    <div class="modal-stand-title">
                      Mahogany Special Edition
                    </div>
                    <p class="modal-pledge">Pledge $200 or more</p>
                  </div>
                  <p class="modal-stand-text">
                    You get two Special Edition Mahogany stands, a Backer
                    T-Shirt, and a personal thank you. You’ll be added to our
                    Backer member list. Shipping is included.
                  </p>
                </div>
              </div>
              <div class="modal-hidden">
                <hr />
                <div class="modal-hidden-content">
                  <p class="modal-hidden-enter">Enter your pledge</p>
                  <div class="modal-btns">
                    <div class="modal-amount-wrapper">
                      <input
                        type="number"
                        value="200"
                        name="modal-amout"
                        id="modal-amount"
                      />
                    </div>
                    <button type="button" class="modal-btn">Continue</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="modal-cover"></div>
    <script>
      const menuWrapper = document.querySelector(".menu-wrapper");
      const body = document.body;
      const modalCover = document.querySelector(".modal-cover");

      const modalStandsWrapper = document.querySelector(".modal-stands");
      const modalStands = Array.from(document.querySelectorAll(".modal-stand"));
      menuWrapper.addEventListener("click", (evt) => {
        body.classList.toggle("show-menu");
      });
      const circles = Array.from(document.querySelectorAll(".modal-circle"));
      const modalTitles = Array.from(
        document.querySelectorAll(".modal-stand-title")
      );
      modalTitles.forEach((title) => {
        title.addEventListener("pointerenter", (evt) => {
          let idx = modalTitles.findIndex((el) => el === title);
          circles[idx].classList.add("hovered");
        });
        title.addEventListener("pointerleave", (evt) => {
          let idx = modalTitles.findIndex((el) => el === title);
          circles[idx].classList.remove("hovered");
        });
      });

      modalStandsWrapper.addEventListener("click", (evt) => {
        if (!evt.target.classList.contains("modal-stand-title")) return;
        modalStands.forEach((m) => m.classList.remove("selected"));
        const modalStand = evt.target.closest(".modal-stand");
        modalStand.classList.add("selected");
      });

      const backProject = document.querySelector(".btn-backing");
      const modal = document.querySelector(".modal");
      const modalClose = document.querySelector(".close-modal");
      backProject.addEventListener("click", (evt) => {
        modalCover.style.height = document.body.scrollHeight + 5 + "px";
        modal.classList.add("show-modal");
      });

      let backedCurrentDisplay = document.querySelector(
        ".stat-backed .stat-title"
      );
      let backedCurrent = document.querySelector(
        ".stat-backed .stat-title"
      ).textContent;
      let backedTotal = document.querySelector(
        ".stat-backed .stat-text"
      ).textContent;

      backedCurrent = +backedCurrent
        .split("")
        .filter((x) => /\d/.test(x))
        .join("");

      backedTotal = +backedTotal
        .split("")
        .filter((x) => /\d/.test(x))
        .join("");
      const progress = document.querySelector(".progress");
      progress.style.width = (backedCurrent / backedTotal) * 100 + "%";
      const modalBtns = Array.from(document.querySelectorAll(".modal-btn"));
      modalBtns.forEach((btn) => {
        btn.addEventListener("click", (evt) => {
          backedCurrent = document.querySelector(
            ".stat-backed .stat-title"
          ).textContent;
          backedCurrent = +backedCurrent
            .split("")
            .filter((x) => /\d/.test(x))
            .join("");
          const inputValue =
            +btn.previousElementSibling.firstElementChild.value;
          const width = ((backedCurrent + inputValue) / backedTotal) * 100;
          console.log(width);
          progress.style.width = width > 100 ? 100 + "%" : width + "%";

          let arr = String(inputValue + backedCurrent)
            .split("")
            .reverse();
          let str = "";

          for (let i = 0; i < arr.length; i += 3) {
            str += arr.slice(i, i + 3).join("");
            if (i < arr.length - 3) str += ",";
          }

          str = "$" + str.split("").reverse().join("");
          console.log(str);
          backedCurrentDisplay.textContent = str;

          modal.classList.remove("show-modal");
          modalCover.style.height = 0;
        });
      });
      modalClose.addEventListener("click", (evt) => {
        modal.classList.remove("show-modal");
        modalCover.style.height = 0;
      });
    </script>
  </body>
</html>
